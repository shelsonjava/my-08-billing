<DataSource
	ID="StreetOldNamesDS"
	serverType="sql"
	tableName="street_old_names"
	qualifyColumnNames="false">
	<fields>
		<field name="street_old_id"			type="integer"	title="street_old_id"				hidden="true" primaryKey="true" />
		<field name="town_id"				type="integer"	title="town_id" 					hidden="true"/>
		<field name="town_name"				type="integer"	title="town_name" 					hidden="true"/>
		<field name="street_id"				type="integer"	title="street_id" 					hidden="true"/>
		<field name="street_name"			type="text"		title="street_name" 					hidden="true"/>
		<field name="street_old_name_descr"	type="text" 	title="street_old_name_descr"/>		
		<field name="street_old_order"		type="text" 	title="street_old_order"/>
	</fields>
	
	<serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.CommonDMI"/>
	
	<operationBindings>		
		<!-- StreetType Status Update -->
		<operationBinding operationType="update" operationId="updateStreetOldNames" serverMethod="updateStreetOldNames">
            <serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.CommonDMI"/>
        </operationBinding>
	
		<!-- StreetType Status Update -->
		<operationBinding operationType="remove" operationId="deleteStreetsOldNames" serverMethod="deleteStreetsOldNames">
            <serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.CommonDMI"/>
        </operationBinding>
	
    	<operationBinding operationId="searchFromDB" operationType="fetch">
    		<selectClause>   			
    			t.street_old_id,
    			t.street_id,
    			s.street_name,
    			t.street_old_name_descr,
    			t.street_old_order,
    			t.town_id,
    			tt.town_name
			</selectClause> 
			<tableClause>street_old_names t, streets s, towns tt</tableClause>
			<whereClause><![CDATA[ 				
				1 = 1 and s.streets_id = t.street_id and tt.town_id = t.town_id
				#if($criteria.street_old_name_descr) AND t.street_old_name_descr like ($criteria.street_old_name_descr)||'%' #end
				#if($criteria.street_id) AND t.street_id = $criteria.street_id #end
				#if($criteria.town_id) AND t.town_id = $criteria.town_id #end
				]]>  
			</whereClause> 
			<orderClause>t.street_id, t.street_old_order</orderClause>
    	</operationBinding>
    </operationBindings>	
</DataSource>