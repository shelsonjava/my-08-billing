<DataSource
	ID="StreetIndexDS"
	serverType="sql"
	tableName="street_indexes"
	qualifyColumnNames="false"
	dropExtraFields = "false">
	<fields>
		<field name="street_index_id"		type="integer"		title="ID"						hidden="true" primaryKey="true" />
		<field name="street_id"				type="integer" 		title="Street Id"				hidden="true"/>
		<field name="town_id"				type="integer" 		title="Street Id"				hidden="true"/>
		<field name="street_name"			type="text"			title="Street Name" />
		<field name="street_index_remark"	type="text"			title="street_index_remark"/>
		<field name="street_index_value"	type="text"			title="Street Index"/>
		<field name="loggedUserName"		type="text"			title="Logged UserName" 		hidden="true" />	
		<field name="idx_descr"				type="text"			title="idx_descr" 				hidden="true" />	
	</fields>
	
	<operationBindings>		

		<serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.DistrictVillageIndexesDMI"/>

		<!-- Add Street Index -->
		<operationBinding operationType="add" operationId="addStreetIndex" serverMethod="addStreetIndex">
            <serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.DistrictVillageIndexesDMI"/>
        </operationBinding>
        
		<!-- Street Index Update -->
		<operationBinding operationType="update" operationId="updateStreetIndex" serverMethod="updateStreetIndex">
            <serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.DistrictVillageIndexesDMI"/>
        </operationBinding>
        
        <!-- Street Index Status Update -->
		<operationBinding operationType="remove" operationId="deleteStreetIndex" serverMethod="deleteStreetIndex">
            <serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.DistrictVillageIndexesDMI"/>
        </operationBinding>
	
    	<operationBinding operationId="searchStreetIndexesFromDB" operationType="fetch">
    		<selectClause>   			
    			t.street_index_id,
				t.street_id,
				s.town_id,
				t.street_index_remark,
				t.street_index_value,
    			s.street_name as street_name    			
			</selectClause> 
			<tableClause>street_indexes t, streets s</tableClause>
			<whereClause><![CDATA[ 
				t.street_id = s.streets_id
				#if($criteria.street_id) AND t.street_id = $criteria.street_id #end
				#if($criteria.town_id) AND s.town_id = $criteria.town_id #end
				#if($criteria.street_index_remark) and t.street_index_remark like '%'||($criteria.street_index_remark)||'%' #end
				#if($criteria.street_index_value) and t.street_index_value like ($criteria.street_index_value)||'%' #end
				]]>  
			</whereClause> 
			<orderClause>t.street_index_id</orderClause>
    	</operationBinding>
    	
    	<operationBinding operationId="searchStrIdxDescrs" operationType="fetch" customFields="idx_descr">
    		<selectClause>   			
    			t.street_index_value||' : '||t.street_index_remark as idx_descr
			</selectClause> 
			<tableClause>street_indexes t</tableClause>
			<whereClause><![CDATA[ 
				1=1
				#if($criteria.street_id) AND t.street_id = $criteria.street_id #end
				]]>  
			</whereClause> 
			<orderClause>t.street_index_id</orderClause>
    	</operationBinding>
    	
    </operationBindings>	
</DataSource>