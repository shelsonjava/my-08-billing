<DataSource
	ID="CountryDS"
	serverType="sql"
	tableName="ccare.countries"
	qualifyColumnNames="false">
	<fields>
		<field name="country_id"		type="integer"	title="ID"				hidden="true" primaryKey="true" />
		<field name="country_name"		type="text" 	title="country_name"/>
		<field name="continent_id"		type="integer"	title="continent_id" 	hidden="true"/>
		<field name="phone_code"		type="text"		title="phone_code"/>
		<field name="season"			type="integer"	title="Season" 		hidden="true"/>
		<field name="continent"			type="text"		title="continent"/>	
		<field name="loggedUserName"	type="text"		title="Logged UserName" 			hidden="true"/>	
		
	</fields>

	<operationBindings>
    	
    	<!-- Searching Countries From Database -->
    	<operationBinding operationId="fetchAllCountriesFromDB" operationType="fetch" serverMethod="fetchAllCountriesFromDB">
    		<serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.CommonDMI"/>
    	</operationBinding>
    	
    	<!-- Searching Countries - Cached -->
    	<operationBinding operationId="countriesSearchCached" operationType="fetch" serverMethod="fetchAllCountries">
    		<serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.CommonDMI"/>
    	</operationBinding>
    	
    	<!-- Add New Country -->
		<operationBinding operationId="countryAdd" operationType="add" serverMethod="countryAdd">
            <serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.CommonDMI"/>
        </operationBinding>
        
        <!-- Modify Country -->
		<operationBinding operationId="countryUpdate" operationType="update" serverMethod="countryUpdate">
            <serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.CommonDMI"/>
        </operationBinding>
        
        <!-- Modify Country Status -->
		<operationBinding operationId="deleteCountry" operationType="remove" serverMethod="deleteCountry">
            <serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.CommonDMI"/>
        </operationBinding>
        
        <operationBinding operationId="searchAllCountriesForCombos" operationType="fetch">
    		<selectClause>   			
    			t.country_id,
				t.country_name,
				trim(nvl(t.phone_code,'')) as phone_code
			</selectClause> 
			<tableClause>countries t</tableClause>	
			<whereClause>
				($defaultWhereClause)
			</whereClause>
			<orderClause>t.country_name</orderClause>
    	</operationBinding>
    	
    	<operationBinding operationId="searchAllCountriesNoContForCombos" operationType="fetch">
    		<selectClause>   			
    			t.country_id,
				t.country_name,
				trim(nvl(t.phone_code,'')) as phone_code		
			</selectClause> 
			<tableClause>countries t</tableClause>	
			<whereClause>
				($defaultWhereClause) and phone_code is not null
			</whereClause>
			<orderClause>t.country_name</orderClause>
    	</operationBinding>
    	
    	
    	 <!-- Search From DB -->
        <operationBinding operationId="searchCountriesByTransportType" operationType="fetch">
    		<selectClause>   			
    			c.country_id, 
    			c.country_name
			</selectClause> 
			<tableClause>countries c</tableClause>
			<whereClause><![CDATA[ 
				($defaultWhereClause)  
				#if($criteria.transport_type_id) 
					 and c.country_id in 
					 	(
					 		select 
					 			c.country_id 
					 		from 
					 			transport_places t, cities c 
					 		where 
					 			c.town_id = t.town_id and t.transport_type_id = $criteria.transport_type_id
					 	)
				#end
				]]>  
			</whereClause> 
			<groupClause>c.country_id, c.country_name</groupClause>
			<orderClause>c.country_name</orderClause>
        </operationBinding>
    	
    </operationBindings>
</DataSource>