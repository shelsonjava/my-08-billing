<DataSource ID="OrgPriorListDS" serverType="sql"
	tableName="org_priority_list" qualifyColumnNames="false">
	<fields>
		<field name="id" 					type="integer"			title="ID"  hidden="true" primaryKey="true" />
		<field name="organization_id" 		type="integer" 			title="organization_id"/>
		<field name="remark"  				type="text"				title="remark" />
		<field name="debt" 					type="integer" 			title="debt"/>
		<field name="tariff" 				type="integer" 			title="tariff"/>
		<field name="billing_date" 			type="datetime" 		title="billing_date"/>
		<field name="start_date" 			type="datetime" 		title="start_date"/>
		<field name="end_date" 				type="datetime" 		title="end_date"/>
		<field name="contact_phones"  		type="text"				title="contact_phones" />
		<field name="organization_name"  	type="text"				title="organization_name" />	
		<field name="update_user" 			type="text" 			title="update_user"/>
		<field name="update_date" 			type="datetime" 		title="update_date"/>	
		<field name="debt_amount" 			type="integer" 			title="debt_amount"/>
		<field name="operator_src" 			type="integer" 			title="operator_src"/>
		<field name="sms_warning" 			type="integer" 			title="sms_warning"/>
	</fields>

	<operationBindings>
		
	    <operationBinding operationType="add" operationId="addOrgPriorityList" serverMethod="addEditOrgPriorityList">
            <serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.OrgPriorityListDMI"/>
        </operationBinding>
        <operationBinding operationType="update" operationId="updateEditOrgPriorityList" serverMethod="addEditOrgPriorityList">
            <serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.OrgPriorityListDMI"/>
        </operationBinding>
        <operationBinding operationType="remove" operationId="removeRecord" serverMethod="removeRecord">
            <serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.OrgPriorityListDMI"/>
        </operationBinding>
        
	    
	    
	    <operationBinding operationId="SearchOrgs" operationType="fetch">
			<selectClause>				
      				t.id, 
					t.organization_id, 
					t.remark, 
					t.debt, 
					t.tariff, 
					t.billing_date, 
					t.start_date, 
					t.end_date, 
					t.contact_phones,
					o.organization_name,
					t.update_user,
					t.update_date,
					t.debt_amount,
					t.operator_src,
					t.sms_warning
			</selectClause>
			<tableClause>				
					ccare.org_priority_list t
       					inner join ccare.organizations o on o.organization_id = t.organization_id
			</tableClause>
			<whereClause><![CDATA[
			    1 = 1 
				#if($criteria.org_name) 
							#foreach($str in $criteria.org_name.split(" "))
								and o.organization_name like '%'||'$str'||'%'
							#end
				 #end
				]]>
			</whereClause>			
		</operationBinding>
		
				
		
	</operationBindings>
</DataSource>