<DataSource
	ID="TranspTypeDS"
	serverType="sql"
	tableName="ccare.transp_types"
	qualifyColumnNames="false"
	dropExtraFields = "false">
	<fields>
		<field name="transp_type_id"			type="integer"		title="ID"				hidden="true" primaryKey="true" />
		<field name="name_descr"				type="text"			title="name_descr"/>
		<field name="kind"						type="integer"		title="kind"/>
		<field name="kindDescr"					type="text"			title="kindDescr"/>
		<field name="loggedUserName"			type="text"			title="loggedUserName"/>
	</fields>

	<operationBindings>		

		<serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.TransportDMI"/>

		<!-- Add TranspType -->
		<operationBinding operationType="add" operationId="addTransportType" serverMethod="addTransportType">
            <serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.TransportDMI"/>
        </operationBinding>
        
		<!-- TranspType Update -->
		<operationBinding operationType="update" operationId="updateTransportType" serverMethod="updateTransportType">
            <serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.TransportDMI"/>
        </operationBinding>
        
        <!-- TranspType Delete -->
		<operationBinding operationType="remove" operationId="removeTransportType" serverMethod="removeTransportType">
            <serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.TransportDMI"/>
        </operationBinding>
	
    	<operationBinding operationId="searchAllTranspTypes" operationType="fetch">
    		<selectClause>   			
    			t.transp_type_id,
				t.name_descr,
				t.kind,
				decode(t.kind,0,'საქალაქო',1,'საქალაქთაშორისო',2,'საერთაშორისო','უცნობი') as kindDescr	
			</selectClause> 
			<tableClause>transp_types t</tableClause>
			<whereClause><![CDATA[
				1 = 1
				#if($criteria.intercity) and t.intercity = $criteria.intercity #end
				#if($criteria.transport_type_name_geo) and t.transport_type_name_geo like ($criteria.transport_type_name_geo)||'%' #end
				]]>  
			</whereClause> 
			<orderClause>t.transp_type_id</orderClause>
    	</operationBinding>
    	<operationBinding operationId="searchAllTransportTypesForCombos" operationType="fetch">
    		<selectClause>   			
    			t.transport_type_id,
    			t.transport_type_name_geo||' ( '||decode(t.intercity,0,'საქალაქო',1,'საქალაქთაშორისო','უცნობი')||' ) ' as transport_type_name_geo 
			</selectClause> 
			<tableClause>transport_types t</tableClause>	
			<whereClause>
				($defaultWhereClause) AND t.deleted = 0
			</whereClause>
			<orderClause>t.transport_type_id</orderClause>			
    	</operationBinding>
    	
    	<operationBinding operationId="searchAllTransportTypesForCombos1" operationType="fetch">
    		<selectClause>   			
    			t.transport_type_id,
    			t.transport_type_name_geo 
			</selectClause> 
			<tableClause>transport_types t</tableClause>	
			<whereClause>
				($defaultWhereClause) AND t.deleted = 0 AND t.intercity = 1
			</whereClause>
			<orderClause>t.transport_type_id</orderClause>			
    	</operationBinding>
    	
    	<operationBinding operationId="searchAllTransportTypesForCombos2" operationType="fetch">
    		<selectClause>   			
    			t.transport_type_id,
    			t.transport_type_name_geo 
			</selectClause> 
			<tableClause>transport_types t</tableClause>	
			<whereClause>
				($defaultWhereClause) AND t.deleted = 0 AND t.intercity = 0
			</whereClause>
			<orderClause>t.transport_type_id</orderClause>			
    	</operationBinding>
    	
    </operationBindings>	
</DataSource>