<DataSource
	ID="TranspItemsDS"
	serverType="sql"
	tableName="transp_items"
	qualifyColumnNames="false"
	dropExtraFields = "false">
	
	<fields>
		<field name="transp_item_id"			type="integer"		title="transp_item_id"				hidden="true" primaryKey="true" />
		<field name="depart_station"			type="text"			title="depart_station"/>
		<field name="arrival_time"				type="datetime"		title="arrival_time"/>
		<field name="departure_time"			type="datetime"		title="departure_time"/>
		<field name="delay_time"				type="datetime"		title="delay_time"/>
		<field name="item_order"				type="integer"		title="item_order"/>
		<field name="transp_schedule_id"		type="integer"		title="transp_schedule_id"/>
		<field name="transp_station_id"			type="integer"		title="transp_station_id"/>
		<field name="loggedUserName"			type="text"			title="loggedUserName" 				hidden="true" />
		<field name="departure_transp_stat_id"	type="integer"		title="departure_transp_stat_id" 	hidden="true" />
		<field name="arrival_transp_stat_id"	type="integer"		title="arrival_transp_stat_id" 		hidden="true" />
	</fields>
	<operationBindings>		
    	<operationBinding operationId="searchTransportDetails" operationType="fetch">
    		<selectClause>   			
    			t.transp_item_id,
				t.arrival_time,
				t.departure_time,
				t.delay_time,
				t.item_order,
				t.transp_schedule_id,
				t.transp_station_id,
				o.name_descr as depart_station,
				t.departure_transp_stat_id,
				t.arrival_transp_stat_id
			</selectClause> 
			<tableClause>transp_items t, transp_stations o</tableClause>
			<whereClause><![CDATA[				
					t.transp_station_id = o.transp_stat_id
					#if($criteria.transp_schedule_id) and t.transp_schedule_id = $criteria.transp_schedule_id #end
				]]>  
			</whereClause> 
			<orderClause>t.item_order</orderClause>
    	</operationBinding>
    </operationBindings>	
</DataSource>