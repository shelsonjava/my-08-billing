<DataSource
	ID="EventOwnerDS"
	serverType="sql"
	tableName="event_owner"
	qualifyColumnNames="false"
	dropExtraFields = "false">
	<fields>
		<field name="event_owner_id"			type="integer"		title="ID"						hidden="true" primaryKey="true" />
		<field name="event_owner_name"			type="text"			title="event_owner_name"/>
		<field name="event_category_name"		type="text"			title="event_category_name"/>
		<field name="organization_name"			type="text"			title="Organization Name"/>
		<field name="event_category_id"			type="integer"		title="event_category_id" 		hidden="true"/>
		<field name="organization_id"			type="integer"		title="Organization Id" 		hidden="true"/>
		<field name="reservable"				type="integer"		title="reservable" 				hidden="true"/>
		<field name="loggedUserName"			type="text"			title="Logged UserName" 		hidden="true" />
	</fields>

	<operationBindings>		

		<serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.EventDMI"/>

		<!-- Add EventOwner -->	
		<operationBinding operationType="add" operationId="addEventOwner" serverMethod="addEventOwner">
            <serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.EventDMI"/>
        </operationBinding>
        
		<!-- EventOwner Update -->
		<operationBinding operationType="update" operationId="updateEventOwner" serverMethod="updateEventOwner">
            <serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.EventDMI"/>
        </operationBinding>
        
        <!-- EventOwner Remove -->
		<operationBinding operationType="remove" operationId="removeEventOwner" serverMethod="removeEventOwner">
            <serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.EventDMI"/>
        </operationBinding>
	
    	<operationBinding operationId="searchAllEventOwner" operationType="fetch">
    		<selectClause>   			
    			t.event_owner_id,
				t.event_owner_name,
				t.event_category_id,
				t.organization_id,
				t.reservable,
				ec.event_category_name,
			    org.organization_name as organization_name
			</selectClause> 
			<tableClause>event_owner t,event_category ec, organizations org</tableClause>
			<whereClause><![CDATA[
				t.event_category_id = ec.event_category_id and t.organization_id = org.organization_id(+)
				#if($criteria.event_category_id) and t.event_category_id = $criteria.event_category_id #end
				#if($criteria.event_owner_name) and t.event_owner_name like '%'||($criteria.event_owner_name)||'%' #end
				]]>  
			</whereClause> 
			<orderClause>t.event_owner_id</orderClause>
    	</operationBinding>
    	
    	<operationBinding operationId="searchAllEventOwnerForCB" operationType="fetch">
    		<selectClause>   			
    			t.event_owner_id,
    			t.event_category_id,
    			t.event_owner_name 
			</selectClause> 
			<tableClause>event_owner t</tableClause>	
			<whereClause>
				($defaultWhereClause)
			</whereClause>		
			<orderClause>t.event_owner_name</orderClause>	
    	</operationBinding>
    	
    	<operationBinding operationId="searchOrganizationsForCB" operationType="fetch">
    		<selectClause>   			
    			org.organization_id,
    			org.organization_name 
			</selectClause> 
			<tableClause>organizations org</tableClause>	
			<whereClause>
				   ($defaultWhereClause)
			</whereClause>	
			<orderClause>org.organization_name</orderClause>		
    	</operationBinding>
    	
    	<operationBinding operationId="searchAllEventOwnerForCallCenter2" operationType="fetch">
    		<selectClause>   
    					distinct			
		    			ep.event_owner_id,
		    			ep.event_category_id,
		    			ep.event_owner_name,
		    			ep.organization_id
			</selectClause> 
			<tableClause>event t
							inner join event_owner ep on t.event_owner_id = ep.event_owner_id
			</tableClause>
			<whereClause><![CDATA[
				1=1
				and (trunc(t.event_date) >= trunc(sysdate) - 1 or t.date_criteria not in (0))
				#if($criteria.event_category_id) and ep.event_category_id = $criteria.event_category_id #end
				#if($criteria.event_owner_name) and ep.event_owner_name like '%'||($criteria.event_owner_name)||'%' #end
				#if($criteria.event_name) and t.event_name like '%'||($criteria.event_name)||'%' #end
				#if($criteria.event_date_p) and (trunc(t.event_date) = trunc($criteria.event_date_p) or t.date_criteria not in (0)) #end
				#if($criteria.entPostGeoAndCom) 
					and (
						  nvl(t.event_name, '_') like '%'||$criteria.entPostGeoAndCom||'%' or 
						  (t.event_name || ' ' || t.remark) like '%'||$criteria.entPostGeoAndCom||'%'
						) 
				#end
				#if($criteria.entPostGeoAndCom1) 
					and (
						  nvl(t.event_name, '_') like '%'||$criteria.entPostGeoAndCom1||'%' or 
						  (t.event_name || ' ' || t.remark) like '%'||$criteria.entPostGeoAndCom1||'%'
						) 
				#end
				#if($criteria.entPostGeoAndCom2) 
					and (
						  nvl(t.event_name, '_') like '%'||$criteria.entPostGeoAndCom2||'%' or 
						  (t.event_name || ' ' || t.remark) like '%'||$criteria.entPostGeoAndCom2||'%'
						) 
				#end
				#if($criteria.entPostGeoAndCom3) 
					and (
						  nvl(t.event_name, '_') like '%'||$criteria.entPostGeoAndCom3||'%' or 
						  (t.event_name || ' ' || t.remark) like '%'||$criteria.entPostGeoAndCom3||'%'
						) 
				#end
				#if($criteria.entPostGeoAndCom4) 
					and (
						  nvl(t.event_name, '_') like '%'||$criteria.entPostGeoAndCom4||'%' or 
						  (t.event_name || ' ' || t.remark) like '%'||$criteria.entPostGeoAndCom4||'%'
						) 
				#end
				#if($criteria.entPostGeoAndCom5) 
					and (
						  nvl(t.event_name, '_') like '%'||$criteria.entPostGeoAndCom5||'%' or 
						  (t.event_name || ' ' || t.remark) like '%'||$criteria.entPostGeoAndCom5||'%'
						) 
				#end				
				]]>  
			</whereClause> 
			<orderClause>ep.event_owner_name</orderClause>
    	</operationBinding>
    	
    </operationBindings>	
</DataSource>