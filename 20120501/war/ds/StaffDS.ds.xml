<DataSource
	ID="StaffDS"
	serverType="sql"
	tableName="staff"
	qualifyColumnNames="false"
	dropExtraFields = "false">
	<fields>
		<field name="staff_id"					type="integer"		title="staff_id"			primaryKey="true" />
		<field name="doc_num"					type="text"			title="doc_num"/>
		<field name="last_name"					type="text"			title="last_name"/>
		<field name="first_name"				type="text"			title="first_name"/>
		<field name="gender_id"					type="integer"		title="gender_id" 			hidden="true"/>
		<field name="nationality_id"			type="integer"		title="nationality_id" 		hidden="true"/>
		<field name="dob"						type="datetime"		title="dob" 				hidden="true"/>
		<field name="dob_descr"					type="text"			title="dob_descr"/>
		<field name="remark"					type="text"			title="remark" />
		<field name="family_status_id"			type="integer"		title="family_status_id" 	hidden="true"/>
		<field name="start_date"				type="datetime"		title="start_date" 			hidden="true"/>
		<field name="department_id"				type="integer"		title="department_id" 		hidden="true"/>
		<field name="gender_descr"				type="text"			title="gender_descr" />
		<field name="nationality_descr"			type="text"			title="nationality_descr" />
		<field name="family_status_descr"		type="text"			title="family_status_descr" />
		<field name="department_name"			type="text"			title="department_name" />
		<field name="start_date_descr"			type="text"			title="start_date_descr" />
		<field name="loggedUserName"			type="text"			title="Logged UserName" 	hidden="true" />
		<field name="address_id"				type="integer"		title="address_id" 			hidden="true"/>
		<field name="preStaffEducation"			type="any"			title="preStaffEducation" 	hidden="true" />
		<field name="preStaffCompSkills"		type="any"			title="preStaffCompSkills" 	hidden="true" />
		<field name="preStaffLanguages"			type="any"			title="preStaffLanguages" 	hidden="true" />
		<field name="preStaffPhones"			type="any"			title="preStaffPhones" 		hidden="true" />
		<field name="preStaffWorks"				type="any"			title="preStaffWorks" 		hidden="true" />
		<field name="physicalAddress"			type="any"			title="physicalAddress" 	hidden="true" />
		
	</fields>

	<operationBindings>		

		<serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.StaffDMI"/>

		<!-- Add Staff -->	
		<operationBinding operationType="add" operationId="addOrUpdate" serverMethod="addOrUpdate">
            <serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.StaffDMI"/>
        </operationBinding>
        
		<!-- Update Staff -->
		<operationBinding operationType="update" operationId="addOrUpdate" serverMethod="addOrUpdate">
            <serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.StaffDMI"/>
        </operationBinding>
        
        <!-- Delete Staff -->
		<operationBinding operationType="remove" operationId="removeStaff" serverMethod="removeStaff">
            <serverObject lookupStyle="new" className="com.info08.billing.callcenterbk.server.impl.dmi.StaffDMI"/>
        </operationBinding>
	
    	<operationBinding operationId="getAllStaff" operationType="fetch">
    		<selectClause>   			
    		   s.staff_id
		      ,s.doc_num
		      ,s.last_name
		      ,s.first_name
		      ,s.gender_id
		      ,s.nationality_id
		      ,s.dob
		      ,to_char(s.dob, 'mm/dd/yyyy') as dob_descr
		      ,s.remark
		      ,s.family_status_id
		      ,s.start_date
		      ,s.department_id
		      ,getdescription(s.gender_id) as gender_descr
		      ,getdescription(s.nationality_id) as nationality_descr
		      ,getdescription(s.family_status_id) as family_status_descr
		      ,d.department_name
		      ,to_char(s.start_date, 'mm/dd/yyyy') as start_date_descr
		      ,s.address_id
			</selectClause> 
			<tableClause>staff s, departments d</tableClause>
			<whereClause><![CDATA[
				s.department_id = d.department_id
				#if($criteria.staff_id) and s.staff_id = $criteria.staff_id #end
				#if($criteria.department_id) and d.department_id = $criteria.department_id #end
				#if($criteria.last_name) and s.last_name like '%' || $criteria.last_name || '%' #end
				#if($criteria.first_name) and s.first_name like '%' || $criteria.first_name || '%' #end
				#if($criteria.remark) and s.remark like '%' || $criteria.remark || '%' #end
				#if($criteria.doc_num) and s.doc_num = $criteria.doc_num #end
				]]>  
			</whereClause> 
			<orderClause>s.last_name</orderClause>
    	</operationBinding>
    	
    	<operationBinding operationId="getAllDepartments" operationType="fetch">
    		<selectClause>   			
    		   d.department_id
		      ,d.department_name
			</selectClause> 
			<tableClause>departments d</tableClause>
			<whereClause><![CDATA[
				1 = 1
				#if($criteria.department_id) and d.department_id = $criteria.department_id #end
				]]>  
			</whereClause> 
			<orderClause>d.department_name</orderClause>
    	</operationBinding>
    </operationBindings>	
</DataSource>